<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pilot Prep - VATSIM Flight Toolkit</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="header-row">
                <div>
                    <h1>üß∞ Pilot Prep</h1>
                    <p class="subtitle">Everything you need to be VATSIM-ready</p>
                </div>
                <div class="nav-controls">
                    <label class="nav-label" for="site-nav">Navigate:</label>
                    <select id="site-nav" class="nav-select" aria-label="Site navigation" onchange="navigatePage()">
                        <option value="index.html">METAR / VATSIM ATIS</option>
                        <option value="notams.html">NOTAMs</option>
                        <option value="routecheck.html">Route Checker</option>
                        <option value="pilotprep.html" selected>Pilot Prep</option>
                    </select>
                    <button class="nav-btn" type="button" onclick="navigatePage()">Go</button>
                </div>
            </div>
        </header>

        <main>
            <div class="input-section">
                <label>Flight Details</label>
                <div class="tool-grid">
                    <div>
                        <label class="small-label" for="pp-callsign">Callsign</label>
                        <input id="pp-callsign" type="text" placeholder="e.g., BAW123" />
                    </div>
                    <div>
                        <label class="small-label" for="pp-aircraft">Aircraft</label>
                        <input id="pp-aircraft" type="text" placeholder="e.g., A320 / B738" />
                    </div>
                    <div>
                        <label class="small-label" for="pp-dep">Departure ICAO</label>
                        <input id="pp-dep" type="text" maxlength="4" placeholder="e.g., EGLL" />
                    </div>
                    <div>
                        <label class="small-label" for="pp-arr">Arrival ICAO</label>
                        <input id="pp-arr" type="text" maxlength="4" placeholder="e.g., EHAM" />
                    </div>
                    <div>
                        <label class="small-label" for="pp-alt">Alternate ICAO</label>
                        <input id="pp-alt" type="text" maxlength="4" placeholder="optional" />
                    </div>
                    <div>
                        <label class="small-label" for="pp-cruise">Cruise level</label>
                        <input id="pp-cruise" type="text" placeholder="e.g., FL380" />
                    </div>
                </div>

                <label class="small-label" for="pp-route" style="margin-top:12px;">Route (from SimBrief)</label>
                <textarea id="pp-route" rows="3" placeholder="Paste the route string"></textarea>

                <div class="btn-row">
                    <button class="primary-btn" type="button" onclick="savePilotPlan()">Save</button>
                    <button class="secondary-btn" type="button" onclick="loadPilotPlan()">Load</button>
                    <button class="secondary-btn" type="button" onclick="runAllChecks()">Run Checks</button>
                </div>
                <p class="input-hint">Save stores your flight locally in your browser (localStorage).</p>
            </div>

            <div id="pp-output" class="result-section" style="display:none;">
                <h2>Pilot Prep Output</h2>
                <div id="pp-output-inner" class="decode-grid"></div>
            </div>

            <div class="divider"><span>TOOLS</span></div>

            <div class="tool-sections">
                <section class="tool-section">
                    <h3>‚úÖ Preflight Checklist</h3>
                    <div id="pp-checklist"></div>
                </section>

                <section class="tool-section">
                    <h3>üìª Clearance / Readback Builder</h3>
                    <div class="tool-grid">
                        <div>
                            <label class="small-label" for="pp-sid">SID (optional)</label>
                            <input id="pp-sid" type="text" placeholder="e.g., DVR1F" />
                        </div>
                        <div>
                            <label class="small-label" for="pp-init-alt">Initial altitude</label>
                            <input id="pp-init-alt" type="text" placeholder="e.g., 6000ft / FL070" />
                        </div>
                        <div>
                            <label class="small-label" for="pp-squawk">Squawk</label>
                            <input id="pp-squawk" type="text" placeholder="e.g., 1234" />
                        </div>
                        <div>
                            <label class="small-label" for="pp-dep-freq">Departure freq</label>
                            <input id="pp-dep-freq" type="text" placeholder="e.g., 118.700" />
                        </div>
                        <div>
                            <label class="small-label" for="pp-qnh">QNH</label>
                            <input id="pp-qnh" type="text" placeholder="e.g., 1013" />
                        </div>
                        <div>
                            <label class="small-label" for="pp-runway">Runway</label>
                            <input id="pp-runway" type="text" placeholder="e.g., 27R" />
                        </div>
                    </div>
                    <div class="btn-row">
                        <button class="primary-btn" type="button" onclick="buildReadback()">Generate Readback</button>
                    </div>
                    <div id="pp-readback" class="decode-grid"></div>
                </section>

                <section class="tool-section">
                    <h3>üí® Winds / Runway Components</h3>
                    <div class="tool-grid">
                        <div>
                            <label class="small-label" for="pp-wind-dir">Wind direction</label>
                            <input id="pp-wind-dir" type="number" min="0" max="360" placeholder="e.g., 240" />
                        </div>
                        <div>
                            <label class="small-label" for="pp-wind-spd">Wind speed (kt)</label>
                            <input id="pp-wind-spd" type="number" min="0" placeholder="e.g., 15" />
                        </div>
                        <div>
                            <label class="small-label" for="pp-rwy-heading">Runway heading</label>
                            <input id="pp-rwy-heading" type="number" min="0" max="360" placeholder="e.g., 270" />
                        </div>
                    </div>
                    <div class="btn-row">
                        <button class="primary-btn" type="button" onclick="calcWindComponents()">Calculate</button>
                    </div>
                    <div id="pp-wind" class="decode-grid"></div>
                </section>

                <section class="tool-section">
                    <h3>üõ£Ô∏è Route Tools</h3>
                    <div class="tool-grid">
                        <div>
                            <label class="small-label" for="pp-region">Region focus</label>
                            <select id="pp-region" class="route-select">
                                <option value="auto" selected>Auto</option>
                                <option value="uk-eu">UK / Europe</option>
                                <option value="us">US / Canada</option>
                            </select>
                        </div>
                    </div>
                    <div class="btn-row">
                        <button class="primary-btn" type="button" onclick="suggestRoute()">Suggest Better Route (cleanup)</button>
                        <button class="secondary-btn" type="button" onclick="formatRouteVariants()">Generate Filing Variants</button>
                    </div>
                    <div id="pp-route-tools" class="decode-grid"></div>
                </section>

                <section class="tool-section">
                    <h3>üåä Oceanic (if applicable)</h3>
                    <div class="btn-row">
                        <button class="primary-btn" type="button" onclick="oceanicHelper()">Generate Oceanic Brief</button>
                    </div>
                    <div id="pp-oceanic" class="decode-grid"></div>
                </section>

                <section class="tool-section">
                    <h3>üßæ Airport Brief (scratchpad)</h3>
                    <div class="btn-row">
                        <button class="secondary-btn" type="button" onclick="insertBriefTemplate()">Insert Template</button>
                        <button class="primary-btn" type="button" onclick="saveBrief()">Save Brief</button>
                    </div>
                    <textarea id="pp-brief" rows="8" placeholder="Notes: gates/stands, taxi hotspots, runway configs, etc."></textarea>
                </section>

                <section class="tool-section">
                    <h3>üßë‚Äç‚úàÔ∏è Active ATC Snapshot (VATSIM)</h3>
                    <div class="btn-row">
                        <button class="primary-btn" type="button" onclick="loadAtcSnapshot()">Load ATC</button>
                    </div>
                    <div id="pp-atc" class="decode-grid"></div>
                </section>

                <section class="tool-section">
                    <h3>üß† Smart Reminders</h3>
                    <div id="pp-reminders" class="decode-grid"></div>
                </section>
            </div>
        </main>

        <footer>
            <p>¬© 2026 METAR Decoder | For educational purposes</p>
        </footer>
    </div>

    <script src="pilotprep.js"></script>
</body>
</html>
