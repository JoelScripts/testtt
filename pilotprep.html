<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pilot Prep - VATSIM Flight Toolkit</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="header-row">
                <div>
                    <h1>üß∞ Pilot Prep</h1>
                    <p class="subtitle">Everything you need to be VATSIM-ready</p>
                </div>
                <div class="nav-controls">
                    <label class="nav-label" for="site-nav">Navigate:</label>
                    <select id="site-nav" class="nav-select" aria-label="Site navigation" onchange="navigatePage()">
                        <option value="index.html">METAR / VATSIM ATIS</option>
                        <option value="notams.html">NOTAMs</option>
                        <option value="routecheck.html">Route Checker</option>
                        <option value="pilotprep.html" selected>Pilot Prep</option>
                    </select>
                    <button class="nav-btn" type="button" onclick="navigatePage()">Go</button>
                </div>
            </div>
        </header>

        <main>
            <div class="input-section">
                <label>Flight Details</label>
                <div class="tool-grid">
                    <div>
                        <label class="small-label" for="pp-callsign">Callsign</label>
                        <input id="pp-callsign" type="text" placeholder="e.g., BAW123" />
                    <main>
                        <div class="pilotprep-main">
                            <div class="pilotprep-col2">
                                <section class="pilotprep-section">
                                    <div class="pilotprep-section-title">Flight Details</div>
                                    <div class="tool-grid">
                                        <div>
                                            <label class="small-label" for="pp-callsign">Callsign</label>
                                            <input id="pp-callsign" type="text" placeholder="e.g., BAW123" />
                                        </div>
                                        <div>
                                            <label class="small-label" for="pp-aircraft">Aircraft</label>
                                            <input id="pp-aircraft" type="text" placeholder="e.g., A320 / B738" />
                                        </div>
                                        <div>
                                            <label class="small-label" for="pp-dep">Departure ICAO</label>
                                            <input id="pp-dep" type="text" maxlength="4" placeholder="e.g., EGLL" />
                                        </div>
                                        <div>
                                            <label class="small-label" for="pp-arr">Arrival ICAO</label>
                                            <input id="pp-arr" type="text" maxlength="4" placeholder="e.g., EHAM" />
                                        </div>
                                        <div>
                                            <label class="small-label" for="pp-alt">Alternate ICAO</label>
                                            <input id="pp-alt" type="text" maxlength="4" placeholder="optional" />
                                        </div>
                                        <div>
                                            <label class="small-label" for="pp-cruise">Cruise level</label>
                                            <input id="pp-cruise" type="text" placeholder="e.g., FL380" />
                                        </div>
                                    </div>
                                    <label class="small-label" for="pp-route" style="margin-top:8px;">Route (from SimBrief)</label>
                                    <textarea id="pp-route" rows="2" placeholder="Paste the route string"></textarea>
                                    <div class="btn-row">
                                        <button class="primary-btn" type="button" onclick="savePilotPlan()">Save</button>
                                        <button class="secondary-btn" type="button" onclick="loadPilotPlan()">Load</button>
                                        <button class="secondary-btn" type="button" onclick="runAllChecks()">Run Checks</button>
                                    </div>
                                    <p class="input-hint">Save stores your flight locally in your browser (localStorage).</p>
                                </section>
                                <section class="pilotprep-section">
                                    <div class="pilotprep-section-title">Departure & Route</div>
                                    <section class="tool-section">
                                        <div class="tool-section-header" onclick="this.parentElement.classList.toggle('collapsed')">
                                            <span class="toggle-arrow">‚ñ∂</span>‚úÖ Preflight Checklist
                                        </div>
                                        <div id="pp-checklist"></div>
                                    </section>
                                    <section class="tool-section collapsed">
                                        <div class="tool-section-header" onclick="this.parentElement.classList.toggle('collapsed')">
                                            <span class="toggle-arrow">‚ñ∂</span>üìª Clearance / Readback Builder
                                        </div>
                                        <div class="tool-grid">
                                            <div>
                                                <label class="small-label" for="pp-sid">SID (optional)</label>
                                                <input id="pp-sid" type="text" placeholder="e.g., DVR1F" />
                                            </div>
                                            <div>
                                                <label class="small-label" for="pp-init-alt">Initial altitude</label>
                                                <input id="pp-init-alt" type="text" placeholder="e.g., 6000ft / FL070" />
                                            </div>
                                            <div>
                                                <label class="small-label" for="pp-squawk">Squawk</label>
                                                <input id="pp-squawk" type="text" placeholder="e.g., 1234" />
                                            </div>
                                            <div>
                                                <label class="small-label" for="pp-dep-freq">Departure freq</label>
                                                <input id="pp-dep-freq" type="text" placeholder="e.g., 118.700" />
                                            </div>
                                            <div>
                                                <label class="small-label" for="pp-qnh">QNH</label>
                                                <input id="pp-qnh" type="text" placeholder="e.g., 1013" />
                                            </div>
                                            <div>
                                                <label class="small-label" for="pp-runway">Runway</label>
                                                <input id="pp-runway" type="text" placeholder="e.g., 27R" />
                                            </div>
                                        </div>
                                        <div class="btn-row">
                                            <button class="primary-btn" type="button" onclick="buildReadback()">Generate Readback</button>
                                        </div>
                                        <div id="pp-readback" class="decode-grid"></div>
                                    </section>
                                    <section class="tool-section collapsed">
                                        <div class="tool-section-header" onclick="this.parentElement.classList.toggle('collapsed')">
                                            <span class="toggle-arrow">‚ñ∂</span>üí® Winds / Runway Components
                                        </div>
                                        <div class="tool-grid">
                                            <div>
                                                <label class="small-label" for="pp-wind-dir">Wind direction</label>
                                                <input id="pp-wind-dir" type="number" min="0" max="360" placeholder="e.g., 240" />
                                            </div>
                                            <div>
                                                <label class="small-label" for="pp-wind-spd">Wind speed (kt)</label>
                                                <input id="pp-wind-spd" type="number" min="0" placeholder="e.g., 15" />
                                            </div>
                                            <div>
                                                <label class="small-label" for="pp-rwy-heading">Runway heading</label>
                                                <input id="pp-rwy-heading" type="number" min="0" max="360" placeholder="e.g., 270" />
                                            </div>
                                        </div>
                                        <div class="btn-row">
                                            <button class="primary-btn" type="button" onclick="calcWindComponents()">Calculate</button>
                                        </div>
                                        <div id="pp-wind" class="decode-grid"></div>
                                    </section>
                                    <section class="tool-section collapsed">
                                        <div class="tool-section-header" onclick="this.parentElement.classList.toggle('collapsed')">
                                            <span class="toggle-arrow">‚ñ∂</span>üõ£Ô∏è Route Tools
                                        </div>
                                        <div class="tool-grid">
                                            <div>
                                                <label class="small-label" for="pp-region">Region focus</label>
                                                <select id="pp-region" class="route-select">
                                                    <option value="auto" selected>Auto</option>
                                                    <option value="uk-eu">UK / Europe</option>
                                                    <option value="us">US / Canada</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="btn-row">
                                            <button class="primary-btn" type="button" onclick="suggestRoute()">Suggest Better Route (cleanup)</button>
                                            <button class="secondary-btn" type="button" onclick="formatRouteVariants()">Generate Filing Variants</button>
                                        </div>
                                        <div id="pp-route-tools" class="decode-grid"></div>
                                    </section>
                                </section>
                            </div>
                            <div class="pilotprep-col2">
                                <section class="pilotprep-section">
                                    <div class="pilotprep-section-title">Preflight & Weather</div>
                                    <section class="tool-section">
                                        <div class="tool-section-header" onclick="this.parentElement.classList.toggle('collapsed')">
                                            <span class="toggle-arrow">‚ñ∂</span>üõ¨ Runway & Procedure Suggestions
                                        </div>
                                        <div class="btn-row">
                                            <button class="primary-btn" type="button" onclick="suggestProcedures()">Suggest Procedures</button>
                                        </div>
                                        <div id="pp-proc-suggest" class="decode-grid"></div>
                                    </section>
                                    <section class="tool-section collapsed">
                                        <div class="tool-section-header" onclick="this.parentElement.classList.toggle('collapsed')">
                                            <span class="toggle-arrow">‚ñ∂</span>üå¶Ô∏è TAF (Forecast) Info
                                        </div>
                                        <div class="btn-row">
                                            <button class="primary-btn" type="button" onclick="showTaf()">Show TAFs</button>
                                        </div>
                                        <div id="pp-taf" class="decode-grid"></div>
                                    </section>
                                    <section class="tool-section collapsed">
                                        <div class="tool-section-header" onclick="this.parentElement.classList.toggle('collapsed')">
                                            <span class="toggle-arrow">‚ñ∂</span>üõ©Ô∏è VATSIM Traffic Snapshot
                                        </div>
                                        <div class="btn-row">
                                            <button class="primary-btn" type="button" onclick="showTrafficSnapshot()">Show Traffic</button>
                                        </div>
                                        <div id="pp-traffic" class="decode-grid"></div>
                                    </section>
                                </section>
                                <section class="pilotprep-section">
                                    <div class="pilotprep-section-title">Enroute & Arrival</div>
                                    <section class="tool-section collapsed">
                                        <div class="tool-section-header" onclick="this.parentElement.classList.toggle('collapsed')">
                                            <span class="toggle-arrow">‚ñ∂</span>üåä Oceanic (if applicable)
                                        </div>
                                        <div class="btn-row">
                                            <button class="primary-btn" type="button" onclick="oceanicHelper()">Generate Oceanic Brief</button>
                                            <button class="secondary-btn" type="button" onclick="oceanicClearanceHelper()">Oceanic Clearance Helper</button>
                                        </div>
                                        <div id="pp-oceanic" class="decode-grid"></div>
                                    </section>
                                    <section class="tool-section collapsed">
                                        <div class="tool-section-header" onclick="this.parentElement.classList.toggle('collapsed')">
                                            <span class="toggle-arrow">‚ñ∂</span>üìª Radio Frequency Planner
                                        </div>
                                        <div class="btn-row">
                                            <button class="primary-btn" type="button" onclick="showRadioPlanner()">Show Frequencies</button>
                                        </div>
                                        <div id="pp-freqs" class="decode-grid"></div>
                                    </section>
                                    <section class="tool-section collapsed">
                                        <div class="tool-section-header" onclick="this.parentElement.classList.toggle('collapsed')">
                                            <span class="toggle-arrow">‚ñ∂</span>üìù Flightplan Filing Helper
                                        </div>
                                        <div class="btn-row">
                                            <button class="primary-btn" type="button" onclick="showFlightplanHelper()">Generate Flightplan</button>
                                        </div>
                                        <div id="pp-fpl" class="decode-grid"></div>
                                    </section>
                                    <section class="tool-section collapsed">
                                        <div class="tool-section-header" onclick="this.parentElement.classList.toggle('collapsed')">
                                            <span class="toggle-arrow">‚ñ∂</span>üó£Ô∏è Voice/Readback Trainer
                                        </div>
                                        <div class="btn-row">
                                            <button class="primary-btn" type="button" onclick="playReadbackTrainer()">Play Readback</button>
                                        </div>
                                        <div id="pp-voice" class="decode-grid"></div>
                                    </section>
                                    <section class="tool-section collapsed">
                                        <div class="tool-section-header" onclick="this.parentElement.classList.toggle('collapsed')">
                                            <span class="toggle-arrow">‚ñ∂</span>üßæ Airport Brief (scratchpad)
                                        </div>
                                        <div class="btn-row">
                                            <button class="secondary-btn" type="button" onclick="insertBriefTemplate('dep')">Dep Template</button>
                                            <button class="secondary-btn" type="button" onclick="insertBriefTemplate('arr')">Arr Template</button>
                                            <button class="secondary-btn" type="button" onclick="insertBriefTemplate('full')">Full Template</button>
                                            <button class="primary-btn" type="button" onclick="autoFillBrief()">Auto-Fill</button>
                                            <button class="primary-btn" type="button" onclick="saveBrief()">Save Brief</button>
                                            <button class="secondary-btn" type="button" onclick="exportBrief()">Export</button>
                                            <button class="secondary-btn" type="button" onclick="importBrief()">Import</button>
                                        </div>
                                        <textarea id="pp-brief" rows="5" placeholder="Notes: gates/stands, taxi hotspots, runway configs, etc."></textarea>
                                    </section>
                                </section>
                                <section class="pilotprep-section">
                                    <div class="pilotprep-section-title">ATC & Reminders</div>
                                    <section class="tool-section collapsed">
                                        <div class="tool-section-header" onclick="this.parentElement.classList.toggle('collapsed')">
                                            <span class="toggle-arrow">‚ñ∂</span>üßë‚Äç‚úàÔ∏è Active ATC Snapshot (VATSIM)
                                        </div>
                                        <div class="btn-row">
                                            <button class="primary-btn" type="button" onclick="loadAtcSnapshot()">Load ATC</button>
                                        </div>
                                        <div id="pp-atc" class="decode-grid"></div>
                                    </section>
                                    <section class="tool-section collapsed">
                                        <div class="tool-section-header" onclick="this.parentElement.classList.toggle('collapsed')">
                                            <span class="toggle-arrow">‚ñ∂</span>üß† Smart Reminders
                                        </div>
                                        <div id="pp-reminders" class="decode-grid"></div>
                                    </section>
                                </section>
                            </div>
                        </div>
                    </main>

        <footer>
            <p>¬© 2026 METAR Decoder | For educational purposes</p>
        </footer>
    </div>

    <script src="pilotprep.js"></script>
</body>
</html>
